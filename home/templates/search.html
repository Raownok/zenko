{% extends 'base.html' %}
{% load static %}
{% block body %}


    <div class="page-heading bg-light">
      <div class="container">
        <div class="row align-items-end text-center">
          <div class="col-lg-7 mx-auto">
              
            <p class="mb-4"><h1>Your Searched Products</h1></p>        
          </div>
        </div>
      </div>
    </div>

    <div class="untree_co-section pt-3">
      <div class="container">

        <div class="row align-items-center mb-5">
          <div class="col-lg-8">
            <h3 class="mb-3 mb-lg-0" style="color: skyblue;">Showing result for {{searched}}:</h3>
          </div>
          <div class="col-lg-4">
            <form method="GET" class="d-flex justify-content-lg-end">
              <input type="hidden" name="q" value="{{ searched }}">
              <label class="mr-2">Sort by:</label>
              <select name="sort" class="form-control" onchange="this.form.submit()">
<option value="new" {% if sort == 'new' %}selected{% endif %}>Newest</option>
                <option value="popular" {% if sort == 'popular' %}selected{% endif %}>Popular</option>
                <option value="sale" {% if sort == 'sale' %}selected{% endif %}>On Sale</option>
                <option value="price_asc" {% if sort == 'price_asc' %}selected{% endif %}>Price: Low to High</option>
                <option value="price_desc" {% if sort == 'price_desc' %}selected{% endif %}>Price: High to Low</option>
                <option value="name_az" {% if sort == 'name_az' %}selected{% endif %}>Name: A → Z</option>
                <option value="name_za" {% if sort == 'name_za' %}selected{% endif %}>Name: Z → A</option>
              </select>
            </form>
          </div>
        </div>
      </div>
    </div>

    {% if searched  %}
    <div class="container">
      <div class="row">
        {% for product in productList %}
          <div class="col-6 col-sm-6 col-md-6 mb-4 col-lg-4">
            <div id="{{product.id}}" class="product-item">
              {% if product.new_product %}
                <div class="label new top-right">
                  <div class='content'>New</div>
                </div>
              {% endif %}

              {% if product.is_sale %}
                <div class="label sale top-right second">
                  <div class='content'>Sale</div>
                </div>
              {% endif %}

              <a href="/shop/product/{{product.id}}" class="product-img">
                <img src="/media/{{product.image1}}" alt="Image" class="img-fluid">
              </a>

              <h3 class="title"><a href="/shop/product/{{product.id}}">{{product.name}}</a></h3>

              <div class="price">
                {% if product.is_sale %}
                  <strike>
                    <span>£ {{product.price}}</span>
                  </strike>
                  &nbsp;&nbsp;
                  <span>£ {{product.sale_price}}</span>
                {% else %}
                  <span>£ {{product.price}}</span>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}

      </div>

      <div class="row mt-5 pb-5">
        <div class="col-12">
          <div class="custom-pagination">
            <ul class="list-unstyled">
              {% if productList.has_previous %}
              
              <li>
                <a href="?q={{ searched|urlencode }}&sort={{ sort }}&page={{ productList.previous_page_number }}">
                  <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M5.854 4.646a.5.5 0 0 1 0 .708L3.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0z"/>
                    <path fill-rule="evenodd" d="M2.5 8a.5.5 0 0 1 .5-.5h10.5a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                  </svg>                      
                </a>
              </li>
              {% endif %}

              Page:{{productList.number}} of {{productList.paginator.num_pages}}

              {% if productList.has_next %}
              
              
              <li>
                <a href="?q={{ searched|urlencode }}&sort={{ sort }}&page={{ productList.next_page_number }}">
                  <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M10.146 4.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L12.793 8l-2.647-2.646a.5.5 0 0 1 0-.708z"/>
                    <path fill-rule="evenodd" d="M2 8a.5.5 0 0 1 .5-.5H13a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8z"/>
                  </svg>
                </a>
              </li>
              {% endif %}
            </ul>
          </div>
        </div>
      </div>


    </div>
      <!-- <h1>You searched for {{searched}}..</h1>
      <br>
      {% for seachProduct in searchResult %}
        {{seachProduct}}
      {% endfor %} -->
    {% else %}
      <h1>Hey you have forgot to search for a product...</h1>
    {% endif %}

        
{% load site_extras %}
{% delivery_section 'search' %}
{% endblock %}
