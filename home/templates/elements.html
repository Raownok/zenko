{% extends 'base.html' %}
{% load static %}
{% block body %}

<div class="page-heading bg-light">
  <div class="container">
    <div class="row align-items-end text-center">
      <div class="col-lg-7 mx-auto">
        <h1 style="color: rgb(29, 28, 28);">{{ product.product_type }}</h1>
      </div>
    </div>
  </div>
</div>

<div class="untree_co-section">
  <div class="container">
    <div class="row">

      <!-- Left column -->
      <div class="col-lg-6">
        <div class="col-10">

          {% if product.new_product %}
          <div class="label new top-right">
            <div class='content'>New</div>
          </div>
          {% endif %}

          {% if product.is_sale %}
          <div class="label sale top-right second">
            <div class='content'>Sale</div>
          </div>
          {% endif %}

          <img src="/media/{{ product.image1 }}" alt="Image" class="img-fluid">

        </div> <!-- /.col-10 -->

        <!-- Gallery under main image -->
        <div class="custom-block" data-aos="fade-up">
          <br><br>
          <h2 class="section-title">Gallery</h2>
          <div class="row gutter-v2 gallery">
            {% if product.image1 %}
              <div class="col-4">
                <a href="/media/{{ product.image1 }}" class="gal-item" data-fancybox="gal">
                  <img src="/media/{{ product.image1 }}" alt="Image" class="img-fluid">
                </a>
              </div>
            {% endif %}
            {% if product.image2 %}
              <div class="col-4">
                <a href="/media/{{ product.image2 }}" class="gal-item" data-fancybox="gal">
                  <img src="/media/{{ product.image2 }}" alt="Image" class="img-fluid">
                </a>
              </div>
            {% endif %}
            {% if product.image3 %}
              <div class="col-4">
                <a href="/media/{{ product.image3 }}" class="gal-item" data-fancybox="gal">
                  <img src="/media/{{ product.image3 }}" alt="Image" class="img-fluid">
                </a>
              </div>
            {% endif %}
            {% if product.image4 %}
              <div class="col-4">
                <a href="/media/{{ product.image4 }}" class="gal-item" data-fancybox="gal">
                  <img src="/media/{{ product.image4 }}" alt="Image" class="img-fluid">
                </a>
              </div>
            {% endif %}
            {% if product.image5 %}
              <div class="col-4">
                <a href="/media/{{ product.image5 }}" class="gal-item" data-fancybox="gal">
                  <img src="/media/{{ product.image5 }}" alt="Image" class="img-fluid">
                </a>
              </div>
            {% endif %}
            {% if product.image6 %}
              <div class="col-4">
                <a href="/media/{{ product.image6 }}" class="gal-item" data-fancybox="gal">
                  <img src="/media/{{ product.image6 }}" alt="Image" class="img-fluid">
                </a>
              </div>
            {% endif %}
          </div>
        </div> <!-- END Gallery -->

        <!-- Video under main image -->
        {% if product.video %}
        <div class="custom-block" data-aos="fade-up">
          <h2 class="section-title">Video</h2>
          <div class="video-container-50">
            <div class="embed-responsive embed-responsive-16by9">
              <video class="embed-responsive-item product-video" controls preload="none" playsinline webkit-playsinline loading="lazy" {% if product.image1 %}poster="{{ product.image1.url }}"{% endif %} data-src="{{ product.video.url }}">
                Your browser does not support the video tag.
              </video>
            </div>
          </div>
        </div>
        {% endif %}

      </div> <!-- /.col-lg-6 -->

      <!-- Right column -->
      <div class="col-lg-6">
        <div class="custom-block" data-aos="fade-up" data-aos-delay="100">
          <h5>{{ product.name }}</h5>

          {% if product.is_sale %}
          <h2 class="section-title">
            <strike>{{ product.price }}৳</strike> &nbsp;&nbsp;
            <span>{{ product.sale_price }}৳</span>
          </h2>
          {% else %}
          <h5 class="section-title">Price: {{ product.price }} ৳</h5>
          {% endif %}

          <form method="POST" id="product-form">
            {% csrf_token %}

            <!-- Modern Segmented Control for Size Selection -->
            <div class="mb-3">
              <div class="segmented-control" role="group" aria-label="Select size">
                <input type="radio" class="seg-radio" id="vol-50" name="volume_option" value="50 ml" checked>
                <label class="seg-label" for="vol-50">50 ml</label>

                <input type="radio" class="seg-radio" id="vol-30" name="volume_option" value="30 ml">
                <label class="seg-label" for="vol-30">30 ml</label>

                <input type="radio" class="seg-radio" id="vol-10c" name="volume_option" value="10 ml combo">
                <label class="seg-label" for="vol-10c">10 ml combo</label>
              </div>
            </div>

            <div class="d-flex gap-2 flex-wrap">
              {% if user.is_authenticated %}
                <button type="submit" formaction="{% url 'add_to_cart' product.id %}" class="btn btn-outline-primary">Add to cart</button>
                <button type="submit" formaction="{% url 'buy_now' product.id %}" class="btn btn-primary">Buy Now</button>
              {% else %}
                <button type="submit" formaction="{% url 'buy_now' product.id %}" class="btn btn-primary">Buy Now</button>
              {% endif %}
            </div>
          </form>

          <!-- Enhanced Fragrance Details Section -->
          <div class="custom-block mt-4" data-aos="fade-up" data-aos-delay="200">
            <h4 class="section-title mb-3" style="color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px;">
              <i class="fas fa-leaf" style="color: #27ae60; margin-right: 8px;"></i>
              About this {{ product.name }}
            </h4>
            
            <!-- Fragrance Story -->
            <div class="fragrance-story mb-4">
              {% if product.details %}
                <p style="color: #34495e; line-height: 1.7; font-size: 16px;">{{ product.details }}</p>
              {% else %}
                <p style="color: #34495e; line-height: 1.7; font-size: 16px;">
                  Discover a carefully crafted fragrance that tells a unique story. This exquisite blend combines 
                  premium ingredients to create a scent that evolves beautifully throughout the day, leaving a 
                  lasting impression wherever you go.
                </p>
              {% endif %}
            </div>

            <!-- Fragrance Notes Section -->
            {% if product.top_note or product.middle_note or product.base_note %}
            <div class="fragrance-notes">
              <h5 class="notes-title mb-3" style="color: #2c3e50; font-weight: 600;">
                <i class="fas fa-vial" style="color: #e74c3c; margin-right: 8px;"></i>
                Fragrance Notes
              </h5>
              
              <!-- Notes List -->
              <div class="notes-list mb-4">
                {% if product.top_note %}
                <div class="note-item mb-2" data-aos="fade-right" data-aos-delay="100">
                  <div class="note-header">
                    <span class="note-type top-note-label">
                      <i class="fas fa-star" style="color: #f39c12;"></i>
                      Top Notes
                    </span>
                  </div>
                  <div class="note-content">{{ product.top_note }}</div>
                </div>
                {% endif %}
                
                {% if product.middle_note %}
                <div class="note-item mb-2" data-aos="fade-right" data-aos-delay="200">
                  <div class="note-header">
                    <span class="note-type middle-note-label">
                      <i class="fas fa-heart" style="color: #27ae60;"></i>
                      Middle Notes
                    </span>
                  </div>
                  <div class="note-content">{{ product.middle_note }}</div>
                </div>
                {% endif %}
                
                {% if product.base_note %}
                <div class="note-item mb-2" data-aos="fade-right" data-aos-delay="300">
                  <div class="note-header">
                    <span class="note-type base-note-label">
                      <i class="fas fa-anchor" style="color: #3498db;"></i>
                      Base Notes
                    </span>
                  </div>
                  <div class="note-content">{{ product.base_note }}</div>
                </div>
                {% endif %}
              </div>
              
              <!-- Interactive Notes Intensity Chart -->
              <div class="notes-intensity-chart" data-aos="fade-up" data-aos-delay="400">
                <h6 class="chart-title mb-3" style="color: #2c3e50; font-weight: 600;">
                  <i class="fas fa-chart-bar" style="color: #9b59b6; margin-right: 8px;"></i>
                  Notes Intensity Profile
                </h6>
                
                <div class="intensity-chart-container">
                  {% if product.top_note and product.top_note_strength %}
                  <div class="intensity-row" data-aos="zoom-in" data-aos-delay="500">
                    <div class="intensity-label">
                      <span class="label-text">Top</span>
                      <span class="note-name">{{ product.top_note|truncatechars:15 }}</span>
                    </div>
                    <div class="intensity-bar-container">
                      <div class="intensity-bar">
                        <div class="intensity-fill top-fill" 
                             style="width: {{ product.top_note_strength }}%;"
                             data-intensity="{{ product.top_note_strength }}">
                          <div class="intensity-glow"></div>
                        </div>
                      </div>
                      <span class="intensity-value">{{ product.top_note_strength }}%</span>
                    </div>
                  </div>
                  {% endif %}
                  
                  {% if product.middle_note and product.middle_note_strength %}
                  <div class="intensity-row" data-aos="zoom-in" data-aos-delay="600">
                    <div class="intensity-label">
                      <span class="label-text">Middle</span>
                      <span class="note-name">{{ product.middle_note|truncatechars:15 }}</span>
                    </div>
                    <div class="intensity-bar-container">
                      <div class="intensity-bar">
                        <div class="intensity-fill middle-fill" 
                             style="width: {{ product.middle_note_strength }}%;"
                             data-intensity="{{ product.middle_note_strength }}">
                          <div class="intensity-glow"></div>
                        </div>
                      </div>
                      <span class="intensity-value">{{ product.middle_note_strength }}%</span>
                    </div>
                  </div>
                  {% endif %}
                  
                  {% if product.base_note and product.base_note_strength %}
                  <div class="intensity-row" data-aos="zoom-in" data-aos-delay="700">
                    <div class="intensity-label">
                      <span class="label-text">Base</span>
                      <span class="note-name">{{ product.base_note|truncatechars:15 }}</span>
                    </div>
                    <div class="intensity-bar-container">
                      <div class="intensity-bar">
                        <div class="intensity-fill base-fill" 
                             style="width: {{ product.base_note_strength }}%;"
                             data-intensity="{{ product.base_note_strength }}">
                          <div class="intensity-glow"></div>
                        </div>
                      </div>
                      <span class="intensity-value">{{ product.base_note_strength }}%</span>
                    </div>
                  </div>
                  {% endif %}
                </div>
                
                <!-- Chart Legend -->
                <div class="chart-legend mt-3">
                  <div class="legend-item">
                    <div class="legend-color top-color"></div>
                    <span>Initial Impression</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-color middle-color"></div>
                    <span>Heart of Fragrance</span>
                  </div>
                  <div class="legend-item">
                    <div class="legend-color base-color"></div>
                    <span>Lasting Foundation</span>
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
          </div>
        </div>
      </div> <!-- /.col-lg-6 -->

    </div> <!-- /.row -->


  </div> <!-- /.container -->
</div> <!-- /.untree_co-section -->

<style>
/* Enhanced Fragrance Notes Styling */
.fragrance-story {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  padding: 20px;
  border-radius: 12px;
  border-left: 4px solid #3498db;
  box-shadow: 0 2px 10px rgba(0,0,0,0.08);
}

/* Notes List Styling */
.notes-list {
  background: #ffffff;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  border: 1px solid #e9ecef;
}

.note-item {
  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
  border-radius: 10px;
  padding: 15px;
  border-left: 4px solid;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.note-item:nth-child(1) { border-left-color: #f39c12; }
.note-item:nth-child(2) { border-left-color: #27ae60; }
.note-item:nth-child(3) { border-left-color: #3498db; }

.note-item:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.note-header {
  margin-bottom: 8px;
}

.note-type {
  font-weight: 700;
  font-size: 14px;
  color: #2c3e50;
  display: inline-flex;
  align-items: center;
}

.note-content {
  color: #5a6c7d;
  font-size: 15px;
  line-height: 1.5;
  font-weight: 500;
}

/* Intensity Chart Styling */
.notes-intensity-chart {
  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
  border-radius: 12px;
  padding: 25px;
  border: 1px solid #dee2e6;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.intensity-chart-container {
  background: #ffffff;
  border-radius: 10px;
  padding: 20px;
  box-shadow: inset 0 2px 8px rgba(0,0,0,0.05);
}

.intensity-row {
  display: flex;
  align-items: center;
  margin: 20px 0;
  padding: 12px;
  background: linear-gradient(135deg, #fafbfc 0%, #ffffff 100%);
  border-radius: 10px;
  transition: all 0.3s ease;
}

.intensity-row:hover {
  transform: translateX(5px);
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.intensity-label {
  min-width: 140px;
  display: flex;
  flex-direction: column;
  margin-right: 20px;
}

.label-text {
  font-weight: 700;
  color: #2c3e50;
  font-size: 14px;
}

.note-name {
  font-size: 12px;
  color: #7f8c8d;
  margin-top: 2px;
  font-style: italic;
}

.intensity-bar-container {
  flex: 1;
  display: flex;
  align-items: center;
}

.intensity-bar {
  flex: 1;
  height: 16px;
  background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
  border-radius: 8px;
  overflow: hidden;
  margin-right: 15px;
  position: relative;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}

.intensity-fill {
  height: 100%;
  border-radius: 8px;
  position: relative;
  transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  animation: fillAnimation 1.5s ease-out;
}

.intensity-glow {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
  animation: shimmer 2s infinite;
}

.top-fill {
  background: linear-gradient(135deg, #f39c12 0%, #f1c40f 50%, #f39c12 100%);
  box-shadow: 0 0 10px rgba(243, 156, 18, 0.4);
}

.middle-fill {
  background: linear-gradient(135deg, #27ae60 0%, #2ecc71 50%, #27ae60 100%);
  box-shadow: 0 0 10px rgba(39, 174, 96, 0.4);
}

.base-fill {
  background: linear-gradient(135deg, #3498db 0%, #5dade2 50%, #3498db 100%);
  box-shadow: 0 0 10px rgba(52, 152, 219, 0.4);
}

.intensity-value {
  font-weight: 700;
  color: #2c3e50;
  font-size: 14px;
  min-width: 50px;
  text-align: center;
}

/* Chart Legend */
.chart-legend {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 20px;
  margin-top: 20px;
  padding: 15px;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 8px;
}

.legend-item {
  display: flex;
  align-items: center;
  font-size: 12px;
  color: #5a6c7d;
  font-weight: 600;
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 3px;
  margin-right: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.top-color { background: linear-gradient(135deg, #f39c12, #f1c40f); }
.middle-color { background: linear-gradient(135deg, #27ae60, #2ecc71); }
.base-color { background: linear-gradient(135deg, #3498db, #5dade2); }

/* Animations */
@keyframes fillAnimation {
  from { width: 0%; }
  to { width: var(--target-width); }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Responsive Design */
@media (max-width: 768px) {
  .fragrance-story, .notes-list, .notes-intensity-chart {
    margin: 15px;
    padding: 15px;
  }
  
  .intensity-row {
    flex-direction: column;
    align-items: flex-start;
    padding: 15px;
  }
  
  .intensity-label {
    min-width: 100%;
    margin-right: 0;
    margin-bottom: 10px;
    text-align: center;
  }
  
  .intensity-bar-container {
    width: 100%;
  }
  
  .chart-legend {
    flex-direction: column;
    align-items: center;
    gap: 10px;
  }
  
  .note-item {
    padding: 12px;
  }
}

@media (max-width: 576px) {
  .intensity-bar {
    margin-right: 10px;
    height: 14px;
  }
  
  .fragrance-story p,
  .note-content {
    font-size: 14px;
  }
  
  .section-title {
    font-size: 18px;
  }
  
  .notes-title,
  .chart-title {
    font-size: 16px;
  }
}

/* Extra mobile hardening for product page */
@media (max-width: 768px) {
  /* Make inner column full width on small screens to avoid side gutters */
  .untree_co-section .col-lg-6 > .col-10 {
    flex: 0 0 100% !important;
    max-width: 100% !important;
  }
}

@media (max-width: 576px) {
  /* Make gallery 2-per-row on small phones */
  .gallery .col-4 {
    flex: 0 0 50%;
    max-width: 50%;
  }
}
@media (max-width: 400px) {
  /* Stack gallery 1-per-row on very small phones */
  .gallery .col-4 {
    flex: 0 0 100%;
    max-width: 100%;
  }
}

/* Ensure video scales */
.embed-responsive {
  position: relative;
  display: block;
  width: 100%;
  overflow: hidden;
}
/* Keep video to 50% of container width and align under heading (left) */
.video-container-50 { width: 50%; margin-left: 0; margin-right: 0; }
/* Maintain 16:9 aspect ratio for responsive video wrapper */
.embed-responsive-16by9 {
  padding-top: 56.25%;
}
.embed-responsive .embed-responsive-item, 
.embed-responsive video, 
.embed-responsive iframe, 
.embed-responsive embed, 
.embed-responsive object {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  border: 0;
}

/* Prevent unexpected horizontal scroll from animated rows */
.intensity-row { flex-wrap: wrap; }

/* Segmented control styles */
.segmented-control {
  display: inline-grid;
  grid-template-columns: repeat(3, minmax(80px, 1fr));
  gap: 8px;
  background: #f3f4f6;
  padding: 8px;
  border-radius: 999px;
  border: 1px solid #e5e7eb;
}
.seg-radio { display: none; }
.seg-label {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  padding: 10px 14px;
  border-radius: 999px;
  font-weight: 600;
  font-size: 14px;
  color: #374151;
  background: #fff;
  border: 1px solid #e5e7eb;
  cursor: pointer;
  transition: all .2s ease;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}
.seg-label:hover { filter: brightness(0.98); }
.seg-radio:checked + .seg-label {
  background: linear-gradient(135deg, #b84592, #c769a8);
  color: #fff;
  border-color: transparent;
  box-shadow: 0 6px 14px rgba(184,69,146,0.35);
}

@media (max-width: 480px) {
  .segmented-control { grid-template-columns: 1fr; }
}

/* Button styling for Buy Now and Add to Cart */
.d-flex.gap-2 {
  gap: 0.5rem;
}
.d-flex.gap-2 .btn {
  min-width: 140px;
}
@media (max-width: 576px) {
  .d-flex.gap-2 {
    flex-direction: column;
  }
  .d-flex.gap-2 .btn {
    width: 100%;
  }
}
</style>

<script>
// Enhanced Fragrance Notes JavaScript
document.addEventListener('DOMContentLoaded', function() {
  // Animate intensity bars on scroll
  const intensityFills = document.querySelectorAll('.intensity-fill');

  // Lazy-load product video when in view to improve performance
  const productVideo = document.querySelector('.product-video');
  if (productVideo) {
    const loadVideo = () => {
      if (!productVideo.getAttribute('src') && productVideo.dataset.src) {
        productVideo.setAttribute('src', productVideo.dataset.src);
        try { productVideo.load(); } catch(e){}
      }
    };
    // If IntersectionObserver is supported, lazy-load when near viewport
    if ('IntersectionObserver' in window) {
      const vio = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            loadVideo();
            vio.disconnect();
          }
        });
      }, { rootMargin: '200px' });
      vio.observe(productVideo);
    } else {
      // Fallback: load on first user interaction/scroll
      const onFirst = () => { loadVideo(); window.removeEventListener('scroll', onFirst); window.removeEventListener('click', onFirst); };
      window.addEventListener('scroll', onFirst, { once: true });
      window.addEventListener('click', onFirst, { once: true });
    }
  }
  
  const observerOptions = {
    threshold: 0.3,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const fill = entry.target;
        const intensity = fill.dataset.intensity;
        
        // Animate to target width
        setTimeout(() => {
          fill.style.width = intensity + '%';
        }, 100);
      }
    });
  }, observerOptions);
  
  intensityFills.forEach(fill => {
    // Start with 0 width
    fill.style.width = '0%';
    observer.observe(fill);
  });
  
  // Add hover effects to intensity rows
  const intensityRows = document.querySelectorAll('.intensity-row');
  
  intensityRows.forEach(row => {
    row.addEventListener('mouseenter', function() {
      const fill = this.querySelector('.intensity-fill');
      fill.style.transform = 'scaleY(1.2)';
      fill.style.filter = 'brightness(1.1)';
    });
    
    row.addEventListener('mouseleave', function() {
      const fill = this.querySelector('.intensity-fill');
      fill.style.transform = 'scaleY(1)';
      fill.style.filter = 'brightness(1)';
    });
  });
  
  // Add click to expand note details
  const noteItems = document.querySelectorAll('.note-item');
  
  noteItems.forEach(item => {
    item.addEventListener('click', function() {
      const content = this.querySelector('.note-content');
      const isExpanded = this.classList.contains('expanded');
      
      if (isExpanded) {
        this.classList.remove('expanded');
        content.style.maxHeight = 'none';
      } else {
        this.classList.add('expanded');
        this.style.transform = 'scale(1.02)';
        setTimeout(() => {
          this.style.transform = 'scale(1)';
        }, 200);
      }
    });
  });
  
  // Parallax effect for fragrance story (disabled on mobile to prevent overlap)
  const fragranceStory = document.querySelector('.fragrance-story');
  
  if (fragranceStory) {
    // Ensure no initial transform that could overlap buttons
    fragranceStory.style.transform = 'none';

    // Only enable a very subtle parallax on large screens
    const enableParallax = () => window.matchMedia('(min-width: 1200px)').matches;

    const onScroll = () => {
      const scrolled = window.pageYOffset;
      const rate = Math.max(scrolled * -0.05, -40); // subtle and clamped
      fragranceStory.style.transform = `translateY(${rate}px)`;
    };

    const attachParallax = () => {
      window.removeEventListener('scroll', onScroll);
      if (enableParallax()) {
        window.addEventListener('scroll', onScroll);
      } else {
        fragranceStory.style.transform = 'none';
      }
    };

    attachParallax();
    window.addEventListener('resize', attachParallax);
  }
  
  // Add pulse animation to legend items on hover
  const legendItems = document.querySelectorAll('.legend-item');
  
  legendItems.forEach(item => {
    item.addEventListener('mouseenter', function() {
      const color = this.querySelector('.legend-color');
      color.style.animation = 'pulse 0.6s ease-in-out';
    });
    
    item.addEventListener('mouseleave', function() {
      const color = this.querySelector('.legend-color');
      color.style.animation = 'none';
    });
  });
});

// Add pulse animation CSS
const pulseStyle = document.createElement('style');
pulseStyle.textContent = `
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); box-shadow: 0 0 15px rgba(0,0,0,0.3); }
    100% { transform: scale(1); }
  }
  
  .note-item.expanded {
    box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    border-left-width: 6px;
  }
`;
document.head.appendChild(pulseStyle);
</script>


{% load site_extras %}
{% delivery_section 'product' %}
{% endblock %}
